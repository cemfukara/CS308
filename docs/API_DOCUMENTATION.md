# API DOCUMENTATION

<font size="6"><span style="color:red">Warning!</span> This document subject to change during development</font>

## Overview

<font size="4">This document describes the REST API endpoints for project backend, and explains usage.</font>

- All data is exchanged in JSON.

- Authentication is handled via JWT tokens in the Authorization header.

- Error messages follow a consistent format:
  ```
  {
      "message": "Error description"
  }
  ```

## Authentication

Authentication is done via JWT cookie. Private routes are checking for a valid JWT cookie, then grant access if role in the cookie matches the required role

- To be implemented: Refresh tokens that will used to refresh access tokens

|     Access      |      Role       |                     Description                      |
| :-------------: | :-------------: | :--------------------------------------------------: |
|     Public      |        -        |              Can be accessed by anyone               |
|     Private     |    customer     |          Can be accessed by logged in users          |
| Product Manager | product manager |          Can be accessed by product manager          |
|  Sales Manager  |  sales manager  |           Can be accessed by sales manager           |
|  Support Agent  |  support agent  |           Can be accessed by support agent           |
|        -        |       dev       | "dev" role can access to any route (in dev env only) |

### JWT Token Contents

Payload of a JWT cookie consist:

```
{
  "user_id": 0,
  "email": "dev@test.local",
  "role": "dev",

  // these lines are generated by JWT automatically
  "iat": 1764280120,
  "exp": 1764884920
}
```

# API Endpoints

## Sales Manager Endpoints

|               METHOD               |                      ENDPOINT                       |                 DESCRIPTION                 |    ACCESS     |     STATUS      |
| :--------------------------------: | :-------------------------------------------------: | :-----------------------------------------: | :-----------: | :-------------: |
|                GET                 |                     /analytics                      | Get sales revenue / profit / loss analytics | Sales Manager | Not Implemented |
|                GET                 |                      /invoices                      |     View invoices in a given date range     | Sales Manager | Not Implemented |
|                GET                 |                /invoices/:id/export                 |            Export invoice as PDF            | Sales Manager | Not Implemented |
| [PATCH](#patch-productsiddiscount) | [/products/:id/discount](#patch-productsiddiscount) |      Apply or update product discounts      | Sales Manager |    Finished     |
|               PATCH                |                /refunds/:id/approve                 |     Approve or decline a refund request     | Sales Manager | Not Implemented |

## Product Manager Endpoints

### Delivery Management

|                METHOD                 |                        ENDPOINT                        |             DESCRIPTION             |     ACCESS      |  STATUS  |
| :-----------------------------------: | :----------------------------------------------------: | :---------------------------------: | :-------------: | :------: |
|       [GET](#get-apideliveries)       |           [/deliveries](#get-apideliveries)            | View list of orders to be delivered | Product Manager | Finished |
| [PATCH](#patch-apideliveriesidstatus) | [/deliveries/:id/status](#patch-apideliveriesidstatus) |    Update order delivery status     | Product Manager | Finished |

### Product Management

|             METHOD              |                 ENDPOINT                  |            DESCRIPTION             |     ACCESS      |     STATUS      |
| :-----------------------------: | :---------------------------------------: | :--------------------------------: | :-------------: | :-------------: |
|    [POST](#post-apiproducts)    |      [/products/](#post-apiproducts)      |         Add a new product          | Product Manager |    Finished     |
|    [PUT](#put-apiproductsid)    |    [/products/:id](#put-apiproductsid)    |        Update product by ID        | Product Manager |    Finished     |
|              PATCH              | /products/:id/comments/:commentId/approve | Approve or reject product comments | Product Manager | Not Implemented |
| [DELETE](#delete-apiproductsid) |  [/products/:id](#delete-apiproductsid)   |        Delete product by ID        | Product Manager |    Finished     |

### Category Management

|               METHOD                |                         ENDPOINT                         |                   DESCRIPTION                   |     ACCESS      |  STATUS  |
| :---------------------------------: | :------------------------------------------------------: | :---------------------------------------------: | :-------------: | :------: |
|     [POST](#post-apicategories)     |           [/categories/](#post-apicategories)            |              Create a new category              | Product Manager | Finished |
|     [PUT](#put-apicategoriesid)     |         [/categories/:id](#put-apicategoriesid)          |         Update category name or details         | Product Manager | Finished |
| [PUT](#put-apicategoriesidreassign) | [/categories/:id/reassign](#put-apicategoriesidreassign) | Reassign products under one category to another | Product Manager | Finished |
|  [DELETE](#delete-apicategoriesid)  |        [/categories/:id](#delete-apicategoriesid)        |                Delete a category                | Product Manager | Finished |

## Support Agent Endpoints

| METHOD |           ENDPOINT           |                  DESCRIPTION                  |    ACCESS     |     STATUS      |
| :----: | :--------------------------: | :-------------------------------------------: | :-----------: | :-------------: |
|  GET   |     /support/chat/queue      |      List active customer chat requests       | Support Agent | Not Implemented |
|  GET   |  /support/chat/:id/context   | View customer context (orders, cart, profile) | Support Agent | Not Implemented |
|  POST  |  /support/chat/:id/message   |              Send a chat message              | Support Agent | Not Implemented |
|  POST  | /support/chat/:id/attachment |        Send a file attachment in chat         | Support Agent | Not Implemented |
| PATCH  |   /support/chat/:id/claim    |             Claim a chat session              | Support Agent | Not Implemented |

## User Endpoints

api/users/

|             METHOD              |              ENDPOINT               |             DESCRIPTION              | Access  |  Status  |
| :-----------------------------: | :---------------------------------: | :----------------------------------: | :-----: | :------: |
| [POST](#post-apiusersregister)  | [/register](#post-apiusersregister) |         Register a new user          | Public  | Finished |
|   [POST](#post-apiuserslogin)   |    [/login](#post-apiuserslogin)    |  Authenticate user and return token  | Public  | Finished |
|   [GET](#get-apiusersprofile)   |  [/profile](#get-apiusersprofile)   |  Get logged-in user's profile info   | Private | Finished |
| [PATCH](#patch-apiusersprofile) | [/profile](#patch-apiusersprofile)  | Update logged-in user's profile info | Private | Finished |

## Product Endpoints

api/products/

|          METHOD           |          ENDPOINT          |       DESCRIPTION        | Access |  Status  |
| :-----------------------: | :------------------------: | :----------------------: | :----: | :------: |
|  [GET](#get-apiproducts)  |   [/](#get-apiproducts)    |     Get all products     | Public | Finished |
| [GET](#get-apiproductsid) | [/:id](#get-apiproductsid) | Get single product by ID | Public | Finished |

## Category Endpoints

api/categories

|          METHOD           |        ENDPOINT         |        DESCRIPTION         | Access |  Status  |
| :-----------------------: | :---------------------: | :------------------------: | :----: | :------: |
| [GET](#get-apicategories) | [/](#get-apicategories) | Get all product categories | Public | Finished |

## Cart Endpoints

api/cart

|                 METHOD                  |                      ENDPOINT                      |           DESCRIPTION           | Access  |     Status      |
| :-------------------------------------: | :------------------------------------------------: | :-----------------------------: | :-----: | :-------------: |
|           [GET](#get-apicart)           |                 [/](#get-apicart)                  |     Get user's current cart     | Private |    Finished     |
|       [POST](#post-apicartitems)        |            [/items](#post-apicartitems)            |   Add product to user's cart    | Private |    Finished     |
|                   PUT                   |                [/items/:productId]                 | Update quantity or item in cart | Private | Not Implemented |
| [DELETE](#delete-apicartitemsproductid) | [/items/:productId](#delete-apicartitemsproductid) |    Remove product from cart     | Private |    Finished     |
|     [DELETE](#delete-apicartitems)      |           [/items](#delete-apicartitems)           |        Clear entire cart        | Private |    Finished     |

## Order Endpoints

api/orders/

|         METHOD          |         ENDPOINT         |                DESCRIPTION                 | Access  |     Status      |
| :---------------------: | :----------------------: | :----------------------------------------: | :-----: | :-------------: |
|  [GET](#get-apiorders)  |   [/](#get-apiorders)    | Get all non cart orders for logged-in user | Private |    Finished     |
| [GET](#get-apiordersid) | [/:id](#get-apiordersid) |          Get order details by ID           | Private |    Finished     |
|          POST           |            /             |       Create a new order (checkout)        | Private |   In Progress   |
|         DELETE          |           /:id           |              Cancel an order               | Private | Not Implemented |

## Wishlist Endpoints

api/wishlist/

|                METHOD                |                ENDPOINT                 |                DESCRIPTION                | Access  |  Status  |
| :----------------------------------: | :-------------------------------------: | :---------------------------------------: | :-----: | :------: |
|       [GET](#get-apiwishlist)        |          [/](#get-apiwishlist)          | Get all wishlist items for logged-in user | Private | Finished |
|    [POST](#post-apiwishlistitems)    |    [/items](#post-apiwishlistitems)     |       Adds item to user's wishlist        | Private | Finished |
| [DELETE](#delete-apiwishlistitemsid) | [items/:id](#delete-apiwishlistitemsid) |          Delete a wishlist item           | Private | Finished |
|  [DELETE](#delete-apiwishlistitems)  |   [/items](#delete-apiwishlistitems)    |          Clears user's wishlist           | Private | Finished |

# Usages

## Sales Manager Usage

## Product Manager Usage

### PATCH /products/:id/discount

Applies discount to given product

- Request Body:

  ```
  {
    "productId":int_id,
    "discountRate":int_rate
  }
  ```

- Response Body:

  ```
  { "message":"Discount applied & users notified",
  "product":
    {
      "product_id":1,
      "category_id":1,
      "name":"iPhone 17 Pro Max",
      "model":"FUT-IP17-PM",
      "serial_number":"SN-IP17-PM-BL",
      "description":"Future generation design, A19 Pro chip, 10x Telephoto camera.",
      "quantity_in_stock":50,
      "price":"89999.00",
      "list_price":"89999.00",
      "warranty_status":"2 Years Apple Turkey",
      "distributor_info":"Apple Inc.",
      "discount_ratio":"0.00"
    },
    "notifiedUsers":1
  }
  ```

- Error:
  ```
  { "message": "productId and discountRate are required" } // http status: 400
  OR
  { "message": 'Server error' } // http status: 500
  ```

### GET api/deliveries

Returns all the orders except for ones with status "cart"

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  {
    "orders": [
      {
        "order_id": 1,
        "user_id": 1,
        "status": "delivered",
        "total_price": "1199.99",
        "created_at": "2025-12-05T21:14:00.000Z",
        "order_date": "2025-11-28T21:14:00.000Z",
        "customer_email": "john.doe@example.com",
        "item_count": 1,
        "shipping_address": null
      },
      {
        "order_id": 3,
        "user_id": 2,
        "status": "processing",
        "total_price": "899.50",
        "created_at": "2025-12-05T21:14:00.000Z",
        "order_date": "2025-12-04T21:14:00.000Z",
        "customer_email": "jane.smith@example.com",
        "item_count": 1,
        "shipping_address": null
      }
    ]
  }
  ```

- Error:
  ```
  { "message": 'Server error' } // http status: 500
  ```

### PATCH api/deliveries/:id/status

Updates the status of a product

- Request Body:

  ```
  {
    "status":"processing"
  }
  ```

- Response Body:

  ```
  {
    "message":"Delivery status updated"
  }
  ```

- Error:
  ```
  {"message":"Invalid status value"}
  OR
  {"message":"Order not found"}
  OR
  { "message": "Server error"} // http status: 500
  ```

### POST api/products/

Creates a new product with given values

- Request Body:

  ```
  {
    // required fields
    "name":"string",  // min:3, max:255
    "price":int,
    "quantity_in_stock":int,
    "category_id":int,

    // can be null fields
    "description":string, // max: 5k
    "popularity":int //min: 0
  }
  ```

- Response Body:

  ```
  {
    "message":"Product created successfully","id": auto_incremented_id
  }
  ```

- Error:
  ```
  {
    "status": "error",
    "message": "Validation failed.",
    "errors":
    [
      // an array including error fields and error reasons
      // ex:
      {
        "field":"name",
        "message":"Product name is required."
      },
      {
        "field":"name",
        "message":"Name must be between 3 and 255 characters."
      }
    ]
  }
  OR
  {"error": "Internal server error"}
  ```

### PUT api/products/:id

Updates the details of given product

- Request Body:

  ```
  {
    // required fields
    "name":"string",  // min:3, max:255
    "price":int,
    "quantity_in_stock":int,
    "category_id":int,

    // can be null fields
    "description":string, // max: 5k
    "popularity":int //min: 0
  }
  ```

- Response Body:

  ```
  {
    "message":"Product updated successfully"
  }
  ```

- Error:
  ```
  {
    "status": "error",
    "message": "Validation failed.",
    "errors":
    [
      // an array including error fields and error reasons
      // ex:
      {
        "field":"name",
        "message":"Product name is required."
      },
      {
        "field":"name",
        "message":"Name must be between 3 and 255 characters."
      }
    ]
  }
  OR
  {"message":"Product not found"}
  OR
  {"error": "Internal server error"}
  ```

### DELETE api/products/:id

Deletes the given product

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  {
    "message":"Product deleted successfully"
  }
  ```

- Error:
  ```
  {"message":"Product not found"}
  OR
  {"error": "Internal server error"}
  ```

### POST api/categories/

Creates a category with given category name

- Request Body:

  ```
  {"name":"category_name"}
  ```

- Response Body:

  ```
  {
    "category_id":5,"name":"category_name"
  }
  ```

- Error:
  ```
  {"error":"Category name is required."}
  OR
  {"error":"A category with this name already exists."}
  OR
  {"error": "Failed to create category."}
  ```

### PUT api/categories/:id

Updates a category with given category name

- Request Body:

  ```
  {"name":"category_name"}
  ```

- Response Body:

  ```
  {
    "message":"Category updated successfully."
  }
  ```

- Error:
  ```
  {"error":"Category name is required."}
  OR
  "message":"Products reassigned and category deleted."
  OR
  {"error": "Failed to update category."}
  ```

### PUT api/categories/:id/reassign

Reassigns products from the category in URL parameter to target category defined in the body. Also deletes the category in the URL parameter

- Request Body:

  ```
  {"targetCategoryId":int_id}
  ```

- Response Body:

  ```
  {
    "message":"Products reassigned and category deleted."
  }
  ```

- Error:
  ```
  {"error":"Target category is required."}
  OR
  {"error":"Target category does not exist."}
  OR
  {"error": "Failed to reassign and delete category."}
  ```

### DELETE api/categories/:id

Deletes the given category. The category must be empty

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  {
    "message":"Category deleted successfully."
  }
  ```

- Error:
  ```
  {"error":"Category not found."}
  OR
  {"error":"Cannot delete category: there are products assigned to this category."}
  OR
  {"error": "Failed to delete category."}
  ```

## Support Agent Usage

TBD

## User Usage

### POST api/users/register

Registers the user with given credentials

- Request Body:

  ```
  {
      "full_name":"Ali Mehmet Y覺lmaz",
      "email":"alimemo@provider.com",
      "password":"alimemoy覺lmaz"
  }
  ```

- Response Body:

  ```
  {
    // http status: 201
    "message": "User registered successfully",
    "user": {
        "full_name": "Ali Mehmet Y覺lmaz",
        "user_id": auto_incremented_id,
        "email": "alimemo@provider.com"
    }
  }
  ```

- Error:
  ```
  { "message": 'Email and password required'} // http status: 400
  OR
  { "message": 'Email already registered'} // http status: 409
  OR
  { "message": 'Server error' } // http status: 500
  ```

### POST api/users/login

Try to log the user in with given credentials

- Request Body:

  ```
    {
        "email": "user_email",
        "password": "user_password"
    }
  ```

- Response Body (+ JWT cookie):

  ```
  {"message": 'Login successful'} // http status: 201
  ```

- Error:
  ```
  { "message": 'Invalid credentials' } // http status: 401
  OR
  { "message": 'Server error' } // http status: 500
  ```

### GET api/users/profile

Returns user information

- Request Body (+ JWT cookie):

  ```
  // Empty body, authentication done by JWT cookie
  ```

- Response Body:

  ```
  {
    "id":19,
    "email":"alimemo@provider.com",
    "firstName": Ali Mehmet,
    "lastName": Y覺lmaz,
    "taxId":123456, // can be null
    "address": "Tuzla/ISTANBUL", // can be null
    "role":"user_role",
    "createdAt":"2025-11-19T13:48:11.000Z"
  }
  // http status: 200
  ```

- Error:
  ```
  { "message": 'User not found' } // http status: 404
  OR
  { "message": 'Server error' } // http status: 500
  ```

### PATCH api/users/profile

Updates the user info with given fields

- Request Body (+ JWT cookie):
  - Request body is includes parameters to be updated. At least one parameter is required. Not updated parameters not required. These parameters can be:
  ```
  { // Possible update fields
    "first_name":"new name"
    "last_name":"new last name"
    "email"="new email"
    "address":"new address"
    "tax_id":"new tax id"
  }
  ```
- Response Body (+ new JWT cookie if email is updated):
  ```
  { "message": 'Profile updated successfully' } // http status: 200
  ```
- Error:
  ```
  { "message": 'Server error' } // http status: 500
  OR
  { "message": 'No valid fields to update.' } // http status: 400
  OR
  { "message": 'Invalid email format.' } // http status: 400
  OR
  { "message": `Invalid field: ${key}` } // Invalid key in request body. http status: 400
  ```

## Product Usage

### GET api/products/

Get the info of given product

- Request Query:

  ```
    http://localhost:5000/api/products?page=1&limit=20&sortBy=price&sortOrder=asc&search=laptop&category=electronics
  ```

- Response Body:

  ```
  // An array of all requested products
  // Ex:
  {
    products:
    [
      {
        "product_id":1,
        "category_id":1,
        "name":"iPhone 17 Pro Max",
        "model":"FUT-IP17-PM",
        "serial_number":"SN-IP17-PM-BL",
        "description":"Future generation design, A19 Pro chip, 10x Telephoto camera.",
        "quantity_in_stock":50,
        "price":"89999.00",
        "list_price":"89999.00",
        "warranty_status":"2 Years Apple Turkey",
        "distributor_info":"Apple Inc.",
        "discount_ratio":"0.00",
        "product_images":
        [
          {
            "image_id":1,
            "product_id":1,
            "image_url":"https://cdn.vatanbilgisayar.com/Upload/PRODUCT/apple/thumb/153503-1_large.jpg",
            "is_primary":1,
            "display_order":1
          },
          {
            "image_id":2,
            "product_id":1,
            "image_url":"https://cdn.vatanbilgisayar.com/Upload/PRODUCT/apple/thumb/153503-2_large.jpg",
            "is_primary":0,
            "display_order":2
          },
        ]
      }
      // may be more products
    ]
  }
  ```

- Error:
  ```
  {"error": "Internal server error"}
  ```

### GET api/products/:id

Get the info of given product

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  // Ex:
  {
    "product_id":1,
    "category_id":1,
    "name":"iPhone 17 Pro Max",
    "model":"FUT-IP17-PM",
    "serial_number":"SN-IP17-PM-BL",
    "description":"Future generation design, A19 Pro chip, 10x Telephoto camera.",
    "quantity_in_stock":50,
    "price":"89999.00",
    "list_price":"89999.00",
    "warranty_status":"2 Years Apple Turkey",
    "distributor_info":"Apple Inc.",
    "discount_ratio":"0.00",
    "product_images":
    [
      {
        "image_id":1,
        "product_id":1,
        "image_url":"https://cdn.vatanbilgisayar.com/Upload/PRODUCT/apple/thumb/153503-1_large.jpg",
        "is_primary":1,
        "display_order":1
      },
      {
        "image_id":2,
        "product_id":1,
        "image_url":"https://cdn.vatanbilgisayar.com/Upload/PRODUCT/apple/thumb/153503-2_large.jpg",
        "is_primary":0,
        "display_order":2
      },
    ]
  }
  ```

- Error:
  ```
  {"error": "Internal server error"}
  ```

## Category Usage

### GET api/categories

Get all categories

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  // Ex:
  [
    {
      "category_id":1,
      "name":"Smartphones"
    },
    {
      "category_id":2,
      "name":"Laptops"
    },
    {
      "category_id":3,
      "name":"Audio"
    },
    {
      "category_id":4,
      "name":"Accessories"
    }
  ]
  ```

- Error:
  ```
  {"error": "Failed to fetch categories"}
  ```

## Cart Usage

### GET api/cart

Get all item in the user's car

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  // Ex:
  {
    "success":true,
    "cart":
    {
      "order_id":4,
      "user_id":0,
      "status":"cart",
      "total_price":null,
      "shipping_address_encrypted":null,
      "created_at":"2025-12-06T13:00:54.000Z",
      "order_date":null
    },
    "items":
    [
      {
          "order_item_id":4,
          "quantity":1,
          "price_at_purchase":"89999.00",
          "name":"iPhone 17 Pro Max",
          "model":"FUT-IP17-PM",
          "price":"89999.00"
      }
    ]
  }
  ```

- Error:
  ```
  {"success":false, "message":"Server error"}
  ```

### POST api/cart/items

Add a item to user's cart. Adding a product existing product again increases products quantity

- Request Body:

  ```
  {
    "productId":1
  }
  ```

- Response Body:

  ```
  {
    "success":true,
    "message":"Item added to cart"
  }
  ```

- Error:
  ```
  {"success":false,"message":"productId required"}
  OR
  {"success":false, "message":"Server error"}
  ```

### DELETE api/cart/items/:productId

Deletes given product from user's cart

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  {
    "success":true,
    "message":"Item removed from cart"
  }
  ```

- Error:
  ```
  {"success":false,"message":"Item not found in your cart"}
  OR
  {"success":false,"message":"productId required"}
  OR
  {"success":false, "message":"Server error"}
  ```

### DELETE api/cart/items/

Clears entire cart of the user

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  { // Returns success even if cart does not exists
    "success":true,
    "message":"Cart cleared"
  }
  ```

- Error:
  ```
  {"success":false, "message":"Server error"}
  ```

## Order Usage

### GET api/orders/

Get all non-cart orders of the user

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  { // Returns success even if no orders for logged in user
    "success":true,
    "orders":[]
  }
  ```

- Error:
  ```
  {"success":false, "message":"Server error"}
  ```

### GET api/orders/:id

Get the order from user's orders with given orderId

- Request Body:

  ```
  // Empty
  ```

- Response Body:

  ```
  {
    "success":true,
    "order":
    {
      "order_id":4,
      "user_id":0,
      "status":"cart",
      "total_price":599.99,
      "created_at":"2025-12-06T13:20:25.000Z",
      "order_date":null,
      "customer_email":"dev@test.local",
      "item_count":null,
      "shipping_address":null
    },
    "items":[//details for each item]
  }
  ```

- Error:
  ```
  {"success":false, "message":"Order not found"}
  OR
  {"success":false, "message":"Server error"}
  ```

## Wishlist Usage

### GET api/wishlist

Get all items in user's wishlist

- Request body (+ JWT cookie):

  ```
  // Empty, authentication done via JWT cookie
  ```

- Response body:

  ```
  {
      "wishlist": [product_details] // Empty array if whistles is empty
  } // http status: 200
  ```

- Error:
  ```
  { "message": 'Server error' } // http status: 500
  ```

### POST api/wishlist/items

Add an item to user's wishlist

- Request body (+ JWT cookie):

  ```
  {"product_id":product_id}
  ```

- Response body:

  ```
  {
      "message": 'Product added to wishlist',
      "wishlist": {
        "id": wishlist_id, // Auto incremented at db
        product_id,
      }
  } // http status: 201
  ```

- Error:
  ```
  { "message": 'Invalid product_id' } // http status: 400
  OR
  { "message": 'Product not found' } // http status: 404
  OR
  { "message": 'Product already in wishlist' } // http status: 409
  OR
  { "message": 'Server error' } // http status: 500
  ```

### DELETE api/wishlist/items/:id

Deletes the item specified in the parameter

- Request body (+ JWT cookie):

  ```
  // Empty, authentication done via JWT cookie
  ```

- Response body:

  ```
  {
   " message" : `product_id:${product_id} is removed from wishlist`
  } // http status: 200
  ```

- Error:
  ```
  { "message": 'Invalid product_id' } // http status: 400
  OR
  { "message": 'Item not found in wishlist' } // http status: 404
  OR
  {" message": 'Server error' } // http status: 500
  ```

### DELETE api/wishlist/items

Clears user's wishlist

- Request body (+ JWT cookie):

  ```
  // Empty, authentication done via JWT cookie
  ```

- Response body:

  ```
  {
      "message": 'Wishlist cleared successfully',
      "deleted": deletedCount, // Deleted item count
  } // http status: 200
  ```

- Error:
  ```
  { "message": 'Wishlist already empty', } // http status: 200
  OR
  {" message": 'Server error' } // http status: 500
  ```
